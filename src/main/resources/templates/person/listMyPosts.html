<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sd="http://www.thymeleaf.org/spring-data"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout">
<head>
<title>Meus Posts</title>
</head>
<body>
	<section layout:fragment="header">
		<h1>Meus Posts</h1>
		<ol class="breadcrumb">
			<li><a href="/"><i class="fa fa-dashboard"></i> Dashboard</a></li>
			<li class="active">Meus Posts</li>
		</ol>
	</section>
	<div layout:fragment="content">
		<div class="box">
			<div class="box-header with-border">
				<h3 class="box-title">Listagem</h3>
			</div>

			<div class="row">

				<!-- Lista com as fotos comentadas -->
				<div th:each="row : ${list}" class="col-md-8">
					<!-- Box Comment -->
					<div class="box-header with-border">
						<div class="user-block">
							<img class="img-circle" th:src="${s3awsurl+'users/'+row.person.user.id+'.png'}" alt="User Image" />
							<span class="username">
								<a href="#" th:text="${row.person.name}"></a></span> <span class="description" th:text="${row.date}">
							</span>
						</div>
						<!-- /.user-block -->
					</div>
					<!-- /.box-header -->
					
					<div class="box-body" style="">
						<img alt="Image" th:src="${s3awsurl} + ${'uploads/pictures/'}+ ${row.picture.systemName} + ${'.png'}" />
						<br></br>
              				<span class="description" th:text="${row.picture.name}"></span> 
              				<span class="pull-right text-muted">27 likes - 2 comments</span>
					</div>
					
					<!-- /.box-body -->
					<div th:each="row2 : ${row.comments}" class="box-footer box-comments" style="">
						<div class="box-comment">
							<!-- User image -->
							<img class="img-circle img-sm" th:src="${s3awsurl+'users/'+row2.person.user.id+'.png'}" alt="User Image" />
							<div class="comment-text">
								<span class="username" th:text="${row2.person.name}"></span>
								<span class="text-muted pull-right" th:text="${row2.date}"></span>
								<!-- /.username -->
								<p>
									<span th:text="${row2.description}"></span>
								</p>
							</div>
							<!-- /.comment-text -->
						</div>
						<!-- /.box-comment -->
					</div>
					<!-- /.box-footer -->
									<!-- FormulÃ¡rio de novo comentÃ¡rio no post -->
				<div class="box-footer" style="">
					<div>
					  <form enctype="application/x-www-form-urlencoded" th:object="${comment}" th:action="@{'/person/' + ${loginuser.person.id} + '/post/' + ${row.id} + '/comment'}" method="post">
					    <img class="img-responsive img-circle img-sm" th:src="${s3awsurl}+${'users/'}+${loginuserid}+${'.png'}" alt="Alt Text"/>
					    <!-- .img-push is used to add margin to elements next to floating images -->
					    <div class="img-push">
					      <input type="text" class="form-control input-sm" th:field="*{description}" id="description" placeholder="Press enter to post comment"/>
					    </div>
					  </form>
				  	</div>
				</div>
					
				</div>
				<!-- Final da Lista com as fotos comentadas -->
				
			</div>

		</div>
	</div>
</body>
</html>